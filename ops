{"version":1,"ops":[{"type":3,"author":{"id":"f45742686adadee9282fa7026d27fc0f08e625c9"},"timestamp":1508518559,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDMzODI2MzA3OQ==","github-url":"https://github.com/DFHack/stonesense/issues/54#issuecomment-338263079"},"message":"Seconded, \nStonesense seems to hate trade wagons. Even though I use 0.43.03 32bit because of my older system at the moment, it seems like this bug applies to newer versions as well. Which is unfortunate.","files":null},{"type":3,"author":{"id":"f92bc1d082692db9463701aa414ef78c43874aaa"},"timestamp":1510873639,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM0NTA5MjIzMQ==","github-url":"https://github.com/DFHack/stonesense/issues/54#issuecomment-345092231"},"message":"This is happening to me also.\nRunning Ubuntu 16.04 LST 64 bit with DF 0.43.05 + twbt + DFHack 0.43.05r2 installed with LNP.\nDF just crashes along with dfhack and ssense when trying to view a tile that has a wagon. took me some time to figure it out.\nno error message is given for anything.","files":null},{"type":3,"author":{"id":"6790946dd548701e70eeeb1d5c94eebf6f371a4e"},"timestamp":1512099121,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM0ODM5MjE4MQ==","github-url":"https://github.com/DFHack/stonesense/issues/54#issuecomment-348392181"},"message":"I'll have a look and see what I can manage.","files":null},{"type":3,"author":{"id":"9ca60a6544018d4e5e205a6b0c0c8103a970640f"},"timestamp":1520609405,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM3MTg0NTQ0MQ==","github-url":"https://github.com/DFHack/stonesense/issues/54#issuecomment-371845441"},"message":"This is even worse on Windows 10 64bit (DF 0.44.05 + DFHack 0.44.05-r2)\nInstantly crashes when a trade wagon exists, No \"Not responding\", and bringing DF down with it(and destroying all progress after the last save)\n\nAt least I can now go back to my first fort after thinking DF can't handle it anymore and then making another fort","files":null},{"type":3,"author":{"id":"dc3f7a37b6d705a041f181bd2e6a53a0ec05dc04"},"timestamp":1525642304,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM4NjkxNjYwNw==","github-url":"https://github.com/DFHack/stonesense/issues/54#issuecomment-386916607"},"message":"Using DF version 44.09 on Windows 10.\n\nBug seems to be still there there. Trade caravan comes and crashes the game. When I used to play it in windows 7 system, I could manipulate Stonesense camera away from trading cart and evade crash that way. But now it doesn't work anymore, it crashes immediately when caravan enters to the map area. I tried to turn on/off all possible features in Stonsesense, but nothing helps. If someone could remove possibility to load trade caravans altogether in code, it might help, I have no better ideas.","files":null},{"type":3,"author":{"id":"e7407101885e72fda96cb15bbed79e455df40781"},"timestamp":1529751356,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM5OTY2NTQwNA==","github-url":"https://github.com/DFHack/stonesense/issues/54#issuecomment-399665404"},"message":"has this been resolved? My game crashes right after i hear the trade music from soundsense. I am guessing that it is the trader who caused my crash.\nDo i start a new game or, is there a solution?","files":null},{"type":3,"author":{"id":"b505cbb60ba651400190522029d45f8ed539d93a"},"timestamp":1529800304,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM5OTcxOTg5NQ==","github-url":"https://github.com/DFHack/stonesense/issues/54#issuecomment-399719895"},"message":"Can't you just run without stonesense?","files":null},{"type":3,"author":{"id":"1788a36d7fa03d26c94b028772fe93cfddc7a188"},"timestamp":1539694484,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDQzMDIyNjAwNg==","github-url":"https://github.com/DFHack/stonesense/issues/54#issuecomment-430226006"},"message":"I' has a same problem too.","files":null},{"type":3,"author":{"id":"03c3be8ab8df301050add02371482c2bb561a637"},"timestamp":1545602122,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDQ0OTY2NTQ5MQ==","github-url":"https://github.com/DFHack/stonesense/issues/54#issuecomment-449665491"},"message":"I have the same problem. \nI use PeridexisErrant's Starter Pack (64bit)  version 0.44.12-r04.\nIt happened on version version 0.44.12-r03 as well.\nIt happens repeatedly and consistently. The game is automatically paused. Whenever I move the screen to the newly arrived caravan the game and stonesense crashes, the DF and stonesense windows close and I lose the unsaved progress. The stderr.log in the directory Dwarf Fortress 0.44.12 reports nothing of the crash. What information do you need from me to fix this issue ?","files":null},{"type":3,"author":{"id":"68b926fc13d39d399733501f6067eb038e2c99d7"},"timestamp":1562702837,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDUwOTc4ODIwNQ==","github-url":"https://github.com/DFHack/stonesense/issues/54#issuecomment-509788205"},"message":"Absolutely the same as @theicewolf23 described.\nWindows 7 x64, latest Masterwork pack (2.6.0.0 - DF 0.44.12, DFHack 0.44.12-r2 (release) on x86_64).","files":null},{"type":3,"author":{"id":"b505cbb60ba651400190522029d45f8ed539d93a"},"timestamp":1562705978,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDUwOTgwNjAzOQ==","github-url":"https://github.com/DFHack/stonesense/issues/54#issuecomment-509806039"},"message":"\u003e What information do you need from me to fix this issue ?\n\nSince it seems to be pretty reproducible, it's unlikely to be specific to anyone's system. Really the only thing that can be provided is a save, which was provided in the first post. Error logs rarely contain useful information about crashes.\n\n(Stonesense has historically been unstable on my primary system(s) so I can't fix this myself.)","files":null},{"type":3,"author":{"id":"68b926fc13d39d399733501f6067eb038e2c99d7"},"timestamp":1562708409,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDUwOTgyMDE3MQ==","github-url":"https://github.com/DFHack/stonesense/issues/54#issuecomment-509820171"},"message":"Just in case please have also my save, hope it'll help at least a bit :)\nhttps://drive.google.com/open?id=1QfsB5Eazfa7U0tgP_6Pr6hT6pr-GwsaO","files":null},{"type":5,"author":{"id":"b505cbb60ba651400190522029d45f8ed539d93a"},"timestamp":1562717054,"metadata":{"github-id":"MDEyOkxhYmVsZWRFdmVudDI0NzA5NzgxNzI="},"added":["Crash"],"removed":[]},{"type":3,"author":{"id":"68b926fc13d39d399733501f6067eb038e2c99d7"},"timestamp":1562798426,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDUxMDI0MTY3Mw==","github-url":"https://github.com/DFHack/stonesense/issues/54#issuecomment-510241673"},"message":"Sooo.... I've been mighty curious and debugged the thing and found out that there's a nullptr exception at line 532 in Creatures.cpp. Simple check did the trick:\n```\nif(source-\u003estatus.current_soul != nullptr) {\n    furball.stress_level = source-\u003estatus.current_soul-\u003epersonality.stress_level;\n}\n```\nBut the wagon itself is displayed with mere \"W\" where it has the center.\n![screenshot](https://user-images.githubusercontent.com/922882/61007440-83d84280-a375-11e9-8352-87d89c8b9d63.png)\nSince I never saw it in life before - it's like that by design?","files":null},{"type":6,"author":{"id":"68b926fc13d39d399733501f6067eb038e2c99d7"},"timestamp":1562798426,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdDI0NzY5MDI4Nw=="},"target":"e457f3bb434fc938899a5a3e16823178c02e78f4e0655edc79e3cc87c98a8e08","message":"Sooo.... I've been mighty curious and debugged the thing and found out that there's a nullptr exception at line 532 in Creatures.cpp. Simple check did the trick:\n```\nif(source-\u003estatus.current_soul != nullptr) {\n    furball.stress_level = source-\u003estatus.current_soul-\u003epersonality.stress_level;\n}\n```\nApparently wagon has no soul :)\nBut I noticed that it is displayed with mere \"W\" where it has the center.\n![screenshot](https://user-images.githubusercontent.com/922882/61007440-83d84280-a375-11e9-8352-87d89c8b9d63.png)\nSince I never saw it in life before - is it like that by design?","files":null},{"type":3,"author":{"id":"b505cbb60ba651400190522029d45f8ed539d93a"},"timestamp":1562799893,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDUxMDI2MzA2OQ==","github-url":"https://github.com/DFHack/stonesense/issues/54#issuecomment-510263069"},"message":"That's definitely a likely cause. I'm honestly surprised that hadn't come up before - many creatures don't have souls, and that change (9c9d8a59d6f667cff4f503fc74fd084e0d0f617f) was introduced in 2014. I'll make that fix and hopefully it works.\n\nI'm guessing there probably isn't a wagon sprite.","files":null},{"type":4,"author":{"id":"b505cbb60ba651400190522029d45f8ed539d93a"},"timestamp":1562800467,"metadata":{"github-id":"MDExOkNsb3NlZEV2ZW50MjQ3NDE0NzU5NA=="},"status":2},{"type":3,"author":{"id":"b505cbb60ba651400190522029d45f8ed539d93a"},"timestamp":1562803122,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDUxMDI3MzczNw==","github-url":"https://github.com/DFHack/stonesense/issues/54#issuecomment-510273737"},"message":"I have posted builds with that fix for the systems that were mentioned above at https://files.dfhack.org/190710000/. Let me know if that works or if you would like builds for other systems. To upgrade stonesense:\n* Copy hack/plugins/stonesense.plug.* from the zip to hack/plugins in your dfhack installation (it should overwrite the copy of stonesense that's already there)\n* (Probably optional:) Copy the stonesense folder over the existing stonesense folder (I don't think it has changed at all since 0.44.12-r2, though, so you can probably skip this)\n\ncc: @jmdejong @Vislar @FalcoGer @NutchapolSal @Eilmanx @Random-txt @mianxiu @theicewolf23","files":null},{"type":3,"author":{"id":"76fd69064c1adb8d76e6f62c6127623951a41c50"},"timestamp":1573881826,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDU1NDYwNjEzMQ==","github-url":"https://github.com/DFHack/stonesense/issues/54#issuecomment-554606131"},"message":"deleted","files":null},{"type":6,"author":{"id":"76fd69064c1adb8d76e6f62c6127623951a41c50"},"timestamp":1573881826,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdDMxMDE1ODc2Nw=="},"target":"6d99117a0ce27f59cf3bcf993286cd8bee32fbb0d57d71fb0fd3c7912d752a9f","message":"I can confirm this fix worked for my Stonesense crash, which was a similar issue described in this thread.  The human wagon appears as a \"W\" while the wagon I came in on is represented by Stonesense's iso graphic.\n\nIn Armok Vision the wagon actually displays but it is standing straight up in the air with whomever is driving it buried in the ground, not visible.\n\nRegardless, it doesn't crash, which is great!  Thanks.","files":null}]}