{"version":1,"ops":[{"type":1,"author":{"id":"743abb780f4fb4eb4de8f2d0037f63c290432170"},"timestamp":1583355385,"metadata":{"github-id":"MDU6SXNzdWU1Nzg3ODIwNzU=","github-url":"https://github.com/DFHack/stonesense/issues/68","origin":"github"},"title":"StoneSense crashes on DFHack 0.47.03-beta1","message":"Hello,\n\nA crash occurs upon loading StoneSense in DFHack 0.47.03-beta1 on Windows 10.\nHere is my `stderr.log`:\n\n```\nDFHack build: 0.47.03-beta1-0-gfb6dd691\nIdentifying DF version.\nLoading hack\\symbols.xml ... OK\nv0.47.03 SDL win32 (windows): PE: 0x5E4916E0\nv0.47.03 SDL win64 (windows): PE: 0x5E491E82\nv0.47.03 linux32 (linux): MD5: d64e00ffa0be385c2f94a40392d065e6\nv0.47.03 linux64 (linux): MD5: 0f184a432dc8b09af70169537e8000b8\nv0.47.03 osx32 (darwin): MD5: 99b655b646e355a115504d89fc5e15a9\nv0.47.03 osx64 (darwin): MD5: cd5ef8c61e892f0fec8065353534aee7\nLoaded 6 DF symbol tables.\nVersion: v0.47.03 SDL win64\nInitializing Console.\nConsole is running.\nInitializing Plugins.\nloading plugin 3dveins\nloaded plugin 3dveins; DFHack build 0.47.03-beta1-0-gfb6dd691\nloading plugin add-spatter\nloaded plugin add-spatter; DFHack build 0.47.03-beta1-0-gfb6dd691\nloading plugin autochop\nloaded plugin autochop; DFHack build 0.47.03-beta1-0-gfb6dd691\nloading plugin autoclothing\nloaded plugin autoclothing; DFHack build 0.47.03-beta1-0-gfb6dd691\nloading plugin autodump\nloaded plugin autodump; DFHack build 0.47.03-beta1-0-gfb6dd691\nloading plugin autofarm\nloaded plugin autofarm; DFHack build 0.47.03-beta1-0-gfb6dd691\nloading plugin autogems\nloaded plugin autogems; DFHack build 0.47.03-beta1-0-gfb6dd691\nloading plugin autohauler\nloaded plugin autohauler; DFHack build 0.47.03-beta1-0-gfb6dd691\nloading plugin autolabor\nloaded plugin autolabor; DFHack build 0.47.03-beta1-0-gfb6dd691\nloading plugin automaterial\nloaded plugin automaterial; DFHack build 0.47.03-beta1-0-gfb6dd691\nloading plugin automelt\nloaded plugin automelt; DFHack build 0.47.03-beta1-0-gfb6dd691\nloading plugin autotrade\nloaded plugin autotrade; DFHack build 0.47.03-beta1-0-gfb6dd691\nloading plugin blueprint\nloaded plugin blueprint; DFHack build 0.47.03-beta1-0-gfb6dd691\nloading plugin building-hacks\nloaded plugin building-hacks; DFHack build 0.47.03-beta1-0-gfb6dd691\nloading plugin buildingplan\nloaded plugin buildingplan; DFHack build 0.47.03-beta1-0-gfb6dd691\nloading plugin burrows\nloaded plugin burrows; DFHack build 0.47.03-beta1-0-gfb6dd691\nloading plugin changeitem\nloaded plugin changeitem; DFHack build 0.47.03-beta1-0-gfb6dd691\nloading plugin changelayer\nloaded plugin changelayer; DFHack build 0.47.03-beta1-0-gfb6dd691\nloading plugin changevein\nloaded plugin changevein; DFHack build 0.47.03-beta1-0-gfb6dd691\nloading plugin cleanconst\nloaded plugin cleanconst; DFHack build 0.47.03-beta1-0-gfb6dd691\nloading plugin cleaners\nloaded plugin cleaners; DFHack build 0.47.03-beta1-0-gfb6dd691\nloading plugin cleanowned\nloaded plugin cleanowned; DFHack build 0.47.03-beta1-0-gfb6dd691\nloading plugin command-prompt\nloaded plugin command-prompt; DFHack build 0.47.03-beta1-0-gfb6dd691\nloading plugin confirm\nloaded plugin confirm; DFHack build 0.47.03-beta1-0-gfb6dd691\nloading plugin createitem\nloaded plugin createitem; DFHack build 0.47.03-beta1-0-gfb6dd691\nloading plugin cursecheck\nloaded plugin cursecheck; DFHack build 0.47.03-beta1-0-gfb6dd691\nloading plugin cxxrandom\nloaded plugin cxxrandom; DFHack build 0.47.03-beta1-0-gfb6dd691\nloading plugin debug\nloaded plugin debug; DFHack build 0.47.03-beta1-0-gfb6dd691\nloading plugin deramp\nloaded plugin deramp; DFHack build 0.47.03-beta1-0-gfb6dd691\nloading plugin dig\nloaded plugin dig; DFHack build 0.47.03-beta1-0-gfb6dd691\nloading plugin digFlood\nloaded plugin digFlood; DFHack build 0.47.03-beta1-0-gfb6dd691\nloading plugin diggingInvaders\nloaded plugin diggingInvaders; DFHack build 0.47.03-beta1-0-gfb6dd691\nloading plugin dwarfmonitor\nloaded plugin dwarfmonitor; DFHack build 0.47.03-beta1-0-gfb6dd691\nloading plugin dwarfvet\nloaded plugin dwarfvet; DFHack build 0.47.03-beta1-0-gfb6dd691\nloading plugin embark-assistant\nloaded plugin embark-assistant; DFHack build 0.47.03-beta1-0-gfb6dd691\nloading plugin embark-tools\nloaded plugin embark-tools; DFHack build 0.47.03-beta1-0-gfb6dd691\nloading plugin eventful\nloaded plugin eventful; DFHack build 0.47.03-beta1-0-gfb6dd691\nloading plugin fastdwarf\nloaded plugin fastdwarf; DFHack build 0.47.03-beta1-0-gfb6dd691\nloading plugin filltraffic\nloaded plugin filltraffic; DFHack build 0.47.03-beta1-0-gfb6dd691\nloading plugin fix-armory\nloaded plugin fix-armory; DFHack build 0.47.03-beta1-0-gfb6dd691\nloading plugin fix-unit-occupancy\nloaded plugin fix-unit-occupancy; DFHack build 0.47.03-beta1-0-gfb6dd691\nloading plugin fixveins\nloaded plugin fixveins; DFHack build 0.47.03-beta1-0-gfb6dd691\nloading plugin flows\nloaded plugin flows; DFHack build 0.47.03-beta1-0-gfb6dd691\nloading plugin follow\nloaded plugin follow; DFHack build 0.47.03-beta1-0-gfb6dd691\nloading plugin forceequip\nloaded plugin forceequip; DFHack build 0.47.03-beta1-0-gfb6dd691\nloading plugin fortplan\nloaded plugin fortplan; DFHack build 0.47.03-beta1-0-gfb6dd691\nloading plugin generated-creature-renamer\nloaded plugin generated-creature-renamer; DFHack build 0.47.03-beta1-0-gfb6dd691\nloading plugin getplants\nloaded plugin getplants; DFHack build 0.47.03-beta1-0-gfb6dd691\nloading plugin hotkeys\nloaded plugin hotkeys; DFHack build 0.47.03-beta1-0-gfb6dd691\nloading plugin infiniteSky\nloaded plugin infiniteSky; DFHack build 0.47.03-beta1-0-gfb6dd691\nloading plugin isoworldremote\nloaded plugin isoworldremote; DFHack build 0.47.03-beta1-0-gfb6dd691\nloading plugin jobutils\nloaded plugin jobutils; DFHack build 0.47.03-beta1-0-gfb6dd691\nloading plugin labormanager\nloaded plugin labormanager; DFHack build 0.47.03-beta1-0-gfb6dd691\nloading plugin lair\nloaded plugin lair; DFHack build 0.47.03-beta1-0-gfb6dd691\nloading plugin liquids\nloaded plugin liquids; DFHack build 0.47.03-beta1-0-gfb6dd691\nloading plugin luasocket\nloaded plugin luasocket; DFHack build 0.47.03-beta1-0-gfb6dd691\nloading plugin manipulator\nloaded plugin manipulator; DFHack build 0.47.03-beta1-0-gfb6dd691\nloading plugin map-render\nloaded plugin map-render; DFHack build 0.47.03-beta1-0-gfb6dd691\nloading plugin misery\nloaded plugin misery; DFHack build 0.47.03-beta1-0-gfb6dd691\nloading plugin mode\nloaded plugin mode; DFHack build 0.47.03-beta1-0-gfb6dd691\nloading plugin mousequery\nloaded plugin mousequery; DFHack build 0.47.03-beta1-0-gfb6dd691\nloading plugin nestboxes\nloaded plugin nestboxes; DFHack build 0.47.03-beta1-0-gfb6dd691\nloading plugin orders\nloaded plugin orders; DFHack build 0.47.03-beta1-0-gfb6dd691\nloading plugin pathable\nloaded plugin pathable; DFHack build 0.47.03-beta1-0-gfb6dd691\nloading plugin petcapRemover\nloaded plugin petcapRemover; DFHack build 0.47.03-beta1-0-gfb6dd691\nloading plugin plants\nloaded plugin plants; DFHack build 0.47.03-beta1-0-gfb6dd691\nloading plugin power-meter\nloaded plugin power-meter; DFHack build 0.47.03-beta1-0-gfb6dd691\nloading plugin probe\nloaded plugin probe; DFHack build 0.47.03-beta1-0-gfb6dd691\nloading plugin prospector\nloaded plugin prospector; DFHack build 0.47.03-beta1-0-gfb6dd691\nloading plugin regrass\nloaded plugin regrass; DFHack build 0.47.03-beta1-0-gfb6dd691\nloading plugin RemoteFortressReader\nloaded plugin RemoteFortressReader; DFHack build 0.47.03-beta1-0-gfb6dd691\nloading plugin rename\nloaded plugin rename; DFHack build 0.47.03-beta1-0-gfb6dd691\nloading plugin rendermax\nloaded plugin rendermax; DFHack build 0.47.03-beta1-0-gfb6dd691\nloading plugin resume\nloaded plugin resume; DFHack build 0.47.03-beta1-0-gfb6dd691\nloading plugin reveal\nloaded plugin reveal; DFHack build 0.47.03-beta1-0-gfb6dd691\nloading plugin ruby\nloaded plugin ruby; DFHack build 0.47.03-beta1-0-gfb6dd691\nloading plugin search\nloaded plugin search; DFHack build 0.47.03-beta1-0-gfb6dd691\nloading plugin seedwatch\nloaded plugin seedwatch; DFHack build 0.47.03-beta1-0-gfb6dd691\nloading plugin showmood\nloaded plugin showmood; DFHack build 0.47.03-beta1-0-gfb6dd691\nloading plugin siege-engine\nloaded plugin siege-engine; DFHack build 0.47.03-beta1-0-gfb6dd691\nloading plugin sort\nloaded plugin sort; DFHack build 0.47.03-beta1-0-gfb6dd691\nloading plugin steam-engine\nloaded plugin steam-engine; DFHack build 0.47.03-beta1-0-gfb6dd691\nloading plugin stockflow\nloaded plugin stockflow; DFHack build 0.47.03-beta1-0-gfb6dd691\nloading plugin stockpiles\nloaded plugin stockpiles; DFHack build 0.47.03-beta1-0-gfb6dd691\nloading plugin stocks\nloaded plugin stocks; DFHack build 0.47.03-beta1-0-gfb6dd691\nloading plugin stonesense\nloaded plugin stonesense; DFHack build 0.47.03-beta1-0-gfb6dd691\nloading plugin strangemood\nloaded plugin strangemood; DFHack build 0.47.03-beta1-0-gfb6dd691\nloading plugin tailor\nloaded plugin tailor; DFHack build 0.47.03-beta1-0-gfb6dd691\nloading plugin tiletypes\nloaded plugin tiletypes; DFHack build 0.47.03-beta1-0-gfb6dd691\nloading plugin title-folder\nloaded plugin title-folder; DFHack build 0.47.03-beta1-0-gfb6dd691\nloading plugin title-version\nloaded plugin title-version; DFHack build 0.47.03-beta1-0-gfb6dd691\nloading plugin trackstop\nloaded plugin trackstop; DFHack build 0.47.03-beta1-0-gfb6dd691\nloading plugin tubefill\nloaded plugin tubefill; DFHack build 0.47.03-beta1-0-gfb6dd691\nloading plugin tweak\nloaded plugin tweak; DFHack build 0.47.03-beta1-0-gfb6dd691\nloading plugin workflow\nloaded plugin workflow; DFHack build 0.47.03-beta1-0-gfb6dd691\nloading plugin workNow\nloaded plugin workNow; DFHack build 0.47.03-beta1-0-gfb6dd691\nloading plugin zone\nloaded plugin zone; DFHack build 0.47.03-beta1-0-gfb6dd691\nStarting the TCP listener.\nStarting IO thread.\nStarting DF input capture thread.\nListening on port 5000\nDFHack is running.\nInvoking: keybinding add Ctrl-F1 hotkeys\nInvoking: keybinding add Alt-F1 hotkeys\nInvoking: keybinding add Ctrl-W twaterlvl\nInvoking: keybinding add Ctrl-V digv\nInvoking: keybinding add Ctrl-Shift-V \"digv x\"\nInvoking: keybinding add Ctrl-C spotclean\nInvoking: keybinding add Ctrl-Shift-K autodump-destroy-here\nInvoking: keybinding add Alt-Shift-I@dwarfmode/Zones \"zone set\"\nInvoking: keybinding add Ctrl-K autodump-destroy-item\nInvoking: keybinding add Ctrl-Alt-S@dwarfmode/Default quicksave\nInvoking: keybinding add Ctrl-Shift-N gui/rename\nInvoking: keybinding add Ctrl-Shift-T \"gui/rename unit-profession\"\nInvoking: keybinding add Ctrl-Shift-P command-prompt\nInvoking: keybinding add Alt-M@dwarfmode/Default \"dwarfmonitor prefs\"\nInvoking: keybinding add Ctrl-F@dwarfmode/Default \"dwarfmonitor stats\"\nInvoking: keybinding add Ctrl-Shift-F@dwarfmode forum-dwarves\nInvoking: keybinding add Alt-S@title gui/settings-manager\nInvoking: keybinding add Alt-S@dwarfmode/Default gui/settings-manager\nInvoking: keybinding add Alt-Q@jobmanagement/Main gui/manager-quantity\nInvoking: keybinding add Ctrl-Shift-R view-unit-reports\nInvoking: keybinding add Alt-I@dwarfmode/ViewUnits|unitlist gui/unit-info-viewer\nInvoking: keybinding add Ctrl-B@dungeonmode adv-bodyswap\nInvoking: keybinding add Ctrl-Shift-B@dungeonmode \"adv-bodyswap force\"\nInvoking: keybinding add Shift-O@dungeonmode gui/companion-order\nInvoking: keybinding add Ctrl-T@dungeonmode gui/advfort\nInvoking: keybinding add Ctrl-A@dungeonmode/ConversationSpeak adv-rumors\nInvoking: keybinding add Ctrl-A@legends \"exportlegends all\"\nInvoking: keybinding add Ctrl-Shift-Z@dwarfmode/Default \"stocks show\"\nInvoking: keybinding add Ctrl-Shift-I@dwarfmode/Default \"gui/dfstatus\"\nInvoking: keybinding add Ctrl-Shift-I@dfhack/lua/dfstatus \"gui/dfstatus\"\nInvoking: keybinding add Alt-P copystock\nInvoking: keybinding add Alt-L@dwarfmode/QueryBuilding/Some/Stockpile \"gui/stockpiles -load\"\nInvoking: keybinding add Alt-S@dwarfmode/QueryBuilding/Some/Stockpile \"gui/stockpiles -save\"\nInvoking: keybinding add Ctrl-D job-duplicate\nInvoking: keybinding add Shift-A \"job-material ALUNITE\"\nInvoking: keybinding add Shift-M \"job-material MICROCLINE\"\nInvoking: keybinding add Shift-D \"job-material DACITE\"\nInvoking: keybinding add Shift-R \"job-material RHYOLITE\"\nInvoking: keybinding add Shift-I \"job-material CINNABAR\"\nInvoking: keybinding add Shift-B \"job-material COBALTITE\"\nInvoking: keybinding add Shift-O \"job-material OBSIDIAN\"\nInvoking: keybinding add Shift-T \"job-material ORTHOCLASE\"\nInvoking: keybinding add Shift-G \"job-material GLASS_GREEN\"\nInvoking: keybinding add Alt-Shift-N \"sort-units name\" \"sort-items description\"\nInvoking: keybinding add Alt-Shift-R \"sort-units arrival\"\nInvoking: keybinding add Alt-Shift-T \"sort-units profession\" \"sort-items type material\"\nInvoking: keybinding add Alt-Shift-Q \"sort-units squad_position\" \"sort-items quality\"\nInvoking: keybinding add Ctrl-M@dwarfmode/QueryBuilding/Some gui/mechanisms\nInvoking: keybinding add Alt-R@dwarfmode/QueryBuilding/Some gui/room-list\nInvoking: keybinding add Alt-L@dwarfmode/LookAround gui/liquids\nInvoking: keybinding add Ctrl-Shift-M@dwarfmode/Build/Position/Trap gui/power-meter\nInvoking: keybinding add Alt-A@dwarfmode/QueryBuilding/Some/SiegeEngine gui/siege-engine\nInvoking: keybinding add Ctrl-W@layer_military/Equip/Customize/View gui/choose-weapons\nInvoking: keybinding add Ctrl-C@layer_military/Uniforms gui/clone-uniform\nInvoking: keybinding add Alt-P@dwarfmode/Hauling/DefineStop/Cond/Guide gui/guide-path\nInvoking: keybinding add Alt-A@dwarfmode/QueryBuilding/Some/Workshop/Job gui/workshop-job\nInvoking: keybinding add Alt-W@dwarfmode/QueryBuilding/Some/Workshop/Job gui/workflow\nInvoking: keybinding add Alt-W@overallstatus \"gui/workflow status\"\nInvoking: keybinding add Alt-W@dfhack/lua/status_overlay \"gui/workflow status\"\nInvoking: keybinding add Shift-B@pet/List/Unit \"gui/autobutcher\"\nInvoking: keybinding add P@dwarfmode/QueryBuilding/Some/Weaponrack gui/assign-rack\nInvoking: keybinding add Alt-Shift-P@dwarfmode/LookAround gui/pathable\nInvoking: tweak stable-cursor\nEnabled tweak stable-cursor (stable_cursor_hook::feed)\nInvoking: tweak advmode-contained\nEnabled tweak advmode-contained (advmode_contained_hook::feed)\nInvoking: tweak fast-trade\nEnabled tweak fast-trade (fast_trade_assign_hook::feed)\nEnabled tweak fast-trade (fast_trade_select_hook::feed)\nInvoking: tweak military-stable-assign\nEnabled tweak military-stable-assign (military_assign_hook::feed)\nInvoking: tweak military-color-assigned\nEnabled tweak military-color-assigned (military_assign_hook::render)\nInvoking: tweak craft-age-wear\nEnabled tweak craft-age-wear (craft_age_wear_hook::ageItem)\nInvoking: tweak farm-plot-select\nEnabled tweak farm-plot-select (farm_select_hook::feed)\nEnabled tweak farm-plot-select (farm_select_hook::render)\nInvoking: tweak import-priority-category\nEnabled tweak import-priority-category (takerequest_hook::feed)\nEnabled tweak import-priority-category (takerequest_hook::render)\nInvoking: tweak condition-material\nEnabled tweak condition-material (condition_material_hook::feed)\nInvoking: tweak hotkey-clear\nEnabled tweak hotkey-clear (hotkey_clear_hook::feed)\nEnabled tweak hotkey-clear (hotkey_clear_hook::render)\nInvoking: tweak embark-profile-name\nEnabled tweak embark-profile-name (embark_profile_name_hook::feed)\nInvoking: tweak block-labors              # Prevents labors that can't be used from being toggled\nEnabled tweak block-labors (block_labors_hook::feed)\nEnabled tweak block-labors (block_labors_hook::render)\nInvoking: tweak burrow-name-cancel\nEnabled tweak burrow-name-cancel (burrow_name_cancel_hook::feed)\nInvoking: tweak cage-butcher\nEnabled tweak cage-butcher (cage_butcher_hook::feed)\nEnabled tweak cage-butcher (cage_butcher_hook::render)\nInvoking: tweak civ-view-agreement\nEnabled tweak civ-view-agreement (civ_agreement_view_hook::render)\nInvoking: tweak eggs-fertile\nEnabled tweak eggs-fertile (egg_fertile_hook::render)\nInvoking: tweak fps-min\nEnabled tweak fps-min (fps_min_hook)\nInvoking: tweak hide-priority\nEnabled tweak hide-priority (hide_priority_hook::feed)\nEnabled tweak hide-priority (hide_priority_hook::render)\nInvoking: tweak kitchen-prefs-all\nEnabled tweak kitchen-prefs-all (kitchen_prefs_all_hook::feed)\nEnabled tweak kitchen-prefs-all (kitchen_prefs_all_hook::render)\nInvoking: tweak kitchen-prefs-empty\nEnabled tweak kitchen-prefs-empty (kitchen_prefs_empty_hook::render)\nInvoking: tweak max-wheelbarrow\nEnabled tweak max-wheelbarrow (max_wheelbarrow_hook::render)\nEnabled tweak max-wheelbarrow (max_wheelbarrow_hook::feed)\nInvoking: tweak shift-8-scroll\nEnabled tweak shift-8-scroll (shift_8_scroll_hook::feed)\nInvoking: tweak stone-status-all\nEnabled tweak stone-status-all (stone_status_all_hook::feed)\nEnabled tweak stone-status-all (stone_status_all_hook::render)\nInvoking: tweak title-start-rename\nEnabled tweak title-start-rename (title_start_rename_hook::feed)\nEnabled tweak title-start-rename (title_start_rename_hook::render)\nInvoking: tweak tradereq-pet-gender\nEnabled tweak tradereq-pet-gender (pet_gender_hook::render)\nInvoking: enable title-version\nInvoking: enable search\nInvoking: enable automaterial\nInvoking: enable  confirm  dwarfmonitor  mousequery  autogems  automelt  autotrade  buildingplan  resume  trackstop  zone  stocks  autochop  stockpiles\nInvoking: embark-tools enable sticky sand mouse\nInvoking: enable embark-assistant\nInvoking: modtools/extra-gamelog enable\nInvoking: enable gui/extended-status\nInvoking: view-item-info enable\nInvoking: gui/load-screen enable\nInvoking: sc-script add SC_WORLD_LOADED onLoad.init-example\nUNKNOWN CLASS 'dfhack_lua_viewscreen@DFHack': vtable = 0x7ff9afbd08d0\nInvoking: gui/prerelease-warning\nloaded map in prerelease build\nInvoking: repeat -name warn-starving -time 10 -timeUnits days -command [ warn-starving ]\nInvoking: warn-starving\nInvoking: ssense\nlibpng warning: iCCP: known incorrect sRGB profile\nlibpng warning: iCCP: known incorrect sRGB profile\nlibpng warning: iCCP: known incorrect sRGB profile\nlibpng warning: iCCP: known incorrect sRGB profile\nlibpng warning: iCCP: known incorrect sRGB profile\nlibpng warning: iCCP: known incorrect sRGB profile\nlibpng warning: iCCP: known incorrect sRGB profile\nlibpng warning: iCCP: known incorrect sRGB profile\nlibpng warning: iCCP: out-of-date sRGB profile with no signature\nClient connection established.\nShutting down client connection.\n```\n\nEDIT: This also seems to happen on 0.44.12-r3","files":null}]}