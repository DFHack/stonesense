{"version":1,"ops":[{"type":1,"author":{"id":"6cab824ac771dbc6f9638d8ac7e3eaea77057cd0"},"timestamp":1493751871,"metadata":{"github-id":"MDU6SXNzdWUyMjU3OTA0MDA=","github-url":"https://github.com/DFHack/stonesense/issues/51","origin":"github"},"title":"Stonesense + DFHack not shutting down cleanly","message":"Mac OS 10.9.5, dfhack 43.05.beta2\n\nThis is a cut and paste of https://github.com/DFHack/dfhack/issues/1084\n(This is with the fresh dylib version as supplied today to fix dfhack issue 1083)\n\nWhat I do:\n\nrun dfhack\nload fortress (created in 43.05), which starts out paused.\nRun 'ssense' or 'stonesense' from dfhack command line\n\nstonesense window comes up correctly centred on wherever in the fortress the cursor was set.\n\nadmire fortress\n\nclose Stonesense window.\n\nSave game.\n\nSelect Quit from dwarf Fortress main menu\n\nDwarf Fortress still has the Stonesense icon, and it won't shut down until Force Quit.\nAt that point DF is forcibly removed and the dfhack terminal window reports this:\n\nStonesense launched\nUsing allegro version 5.2.2 r1\nStonesense shutdown.\nClearing all animal hospitals\n[DFHack]# /Applications/Games/Dwarf Fortress/dfhack: line 15: 2031 Killed: 9 DYLD_INSERT_LIBRARIES=./hack/libdfhack.dylib ./dwarfort.exe \"$@\"\n\nlogout\n\n[Process completed]","files":null}]}